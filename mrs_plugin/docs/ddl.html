<!DOCTYPE html>
<html lang="en" dir="ltr">
<!-- Copyright (c) 2022, 2023, Oracle and/or its affiliates.-->

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>MRS DDL Reference</title>
    <link rel="shortcut icon" href="images/favicon.png" type="image/x-icon">
        <link rel="stylesheet" href="style/style.css">
                <!-- cSpell:ignore pagetitle -->
    <title>MRS DDL Reference</title>
    <style type="text/css">
        code {
            white-space: pre;
        }
    </style>
        <script>
        window.addEventListener('DOMContentLoaded', () => {
            const observer = new IntersectionObserver(entries => {
                entries.forEach(entry => {
                    const id = entry.target.getAttribute('id');
                    if (entry.intersectionRatio > 0) {
                        const e = document.querySelector(`nav li a[href="#` + id + `"]`).parentElement;
                        e.classList.add('active');
                        if (e.scrollIntoViewIfNeeded !== undefined) {
                            e.scrollIntoViewIfNeeded(true);
                        } else {
                            e.scrollIntoView(true);
                        }
                    } else {
                        document.querySelector(`nav li a[href="#` + id + `"]`).parentElement.classList.remove('active');
                    }
                });
            });
            // Track all h that have an `id` applied
            document.querySelectorAll('.content h1[id],h2[id],h3[id]').forEach((section) => {
                observer.observe(section);
            });

            if (typeof acquireVsCodeApi === "function") {
                document.vscode = acquireVsCodeApi();

                const addVsCodeDecorations = () => {
                    const addVsActionBtn = (e, command, caption) => {
                        const d = document.createElement("button");

                        d.innerHTML = '<i class="arrow right"></i><p>' + caption + '</p>';
                        d.onclick = () => {
                            document.vscode.postMessage({ command, path: e.innerHTML });
                        }
                        e.parentNode.insertBefore(d, e.nextSibling)
                    }

                    document.querySelectorAll("code").forEach((e) => {
                        if (e.innerHTML.endsWith(".sql")) {
                            addVsActionBtn(e, "openSqlFile", "Open in MySQL Shell");
                        } else if (e.innerHTML.endsWith(".mrs.json")) {
                            addVsActionBtn(e, "loadMrsDump", "Load MRS Dump");
                        } else if (e.innerHTML.startsWith("VSCodeProject:") > 0) {
                            e.innerHTML = e.innerHTML.slice("VSCodeProject:".length);
                            addVsActionBtn(e, "saveProject", "Save Project");
                        }
                    });
                }

                addVsCodeDecorations();
            } else {
                document.querySelectorAll("code").forEach((e) => {
                    if (e.innerHTML.startsWith("VSCodeProject:") > 0) {
                        e.innerHTML = e.innerHTML.slice("VSCodeProject:".length);
                    }
                });
            }
        });

        // Handle the message inside the webview
        window.addEventListener('message', event => {

            const message = event.data; // The JSON data our extension sent

            switch (message.command) {
                case 'goToId':
                    if (message.id) {
                        window.location = "#" + message.id;
                    }

                    break;
            }
        });
    </script>
</head>

<body>
    <div class="page">
        <div class="sidebar">
            <nav class="section-nav">
                <h1>MRS Documentation</h1>
                <h2>
                    <div class="icon bookIcon"></div> <a href="index.html#document-top">MRS Developer's Guide</a>
                </h2>
                <h2>
                    <div class="icon bookIcon"></div> <a href="ddl.html#document-top">MRS DDL Reference</a>
                </h2>
                <h2>
                    <div class="icon bookIcon"></div> <a href="sdk.html#document-top">MRS SDK Reference</a>
                </h2>
                <hr />
                <h3>MRS DDL Reference</h3>
                                <ul>
                                <li><a
                                href="#introduction-to-the-mrs-ddl---sql-extension"
                                id="toc-introduction-to-the-mrs-ddl---sql-extension"><span
                                class="toc-section-number">1</span>
                                Introduction to the MRS DDL - SQL
                                Extension</a></li>
                                <li><a href="#mrs-ddl-reference"
                                id="toc-mrs-ddl-reference"><span
                                class="toc-section-number">2</span> MRS
                                DDL Reference</a>
                                <ul>
                                <li><a href="#configure-rest-metadata"
                                id="toc-configure-rest-metadata"><span
                                class="toc-section-number">2.1</span>
                                CONFIGURE REST METADATA</a></li>
                                <li><a href="#create-rest-service"
                                id="toc-create-rest-service"><span
                                class="toc-section-number">2.2</span>
                                CREATE REST SERVICE</a></li>
                                </ul></li>
                                </ul>
                            </nav>
        </div>
        <div class="content">
            <div class="header" id="document-top">
                <p>MySQL REST Service - PREVIEW</p>
                <h1>MRS DDL Reference</h1>
            </div>
            <div class="main">
                <p>This document discusses the MySQL REST Service (MRS)
                DDL - SQL Extension. The MRS DDL - SQL Extension adds a
                set of MRS specific DDL statements to the MySQL Shell
                SQL handling in order to provide a familiar management
                interface to MySQL developers and DBAs.</p>
                <p><strong>Chapter Overview</strong></p>
                <ul>
                <li><a
                href="#introduction-to-the-mrs-ddl-extension">Introduction
                to the MRS DDL Extension</a></li>
                <li><a href="#mrs-ddl-reference">MRS DDL
                Reference</a></li>
                </ul>
                <hr />
                <p>Please also see</p>
                <ul>
                <li><strong><a href="index.html">MySQL REST Service -
                Developerâ€™s Guide</a></strong> - This book explains how
                to install and configure the MySQL REST Service (MRS) as
                well as how to access the data through REST calls.</li>
                <li><strong><a href="sdk.html">MySQL REST Service - SDK
                Reference</a></strong> - This document explains how to
                work with the MRS Software Development Kit and discusses
                the Client APIs.</li>
                </ul>
                <hr />
                <!-- Copyright (c) 2022, 2023, Oracle and/or its affiliates.

                This program is free software; you can redistribute it and/or modify
                it under the terms of the GNU General Public License, version 2.0,
                as published by the Free Software Foundation.

                This program is also distributed with certain software (including
                but not limited to OpenSSL) that is licensed under separate terms, as
                designated in a particular file or component or in included license
                documentation.  The authors of MySQL hereby grant you an additional
                permission to link the program and your derivative works with the
                separately licensed software that they have included with MySQL.
                This program is distributed in the hope that it will be useful,  but
                WITHOUT ANY WARRANTY; without even the implied warranty of
                MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See
                the GNU General Public License, version 2.0, for more details.

                You should have received a copy of the GNU General Public License
                along with this program; if not, write to the Free Software Foundation, Inc.,
                51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA -->
                <h1 data-number="1"
                id="introduction-to-the-mrs-ddl---sql-extension"><span
                class="header-section-number">1</span> Introduction to
                the MRS DDL - SQL Extension</h1>
                <p>Providing a management interface that feels familiar
                to MySQL developers and DBAs and integrates well into
                their existing processes has been an essential part of
                the MySQL REST Service (MRS) design.</p>
                <p>The MySQL REST Service Shell plugin registers a SQL
                rewrite extension that process a set of MRS DDL
                statements that allows these DDL statements to be used
                in regular SQL scripts that are processed by the MySQL
                Shell or <a
                href="https://marketplace.visualstudio.com/items?itemName=Oracle.mysql-shell-for-vs-code">MySQL
                Shell for VS Code</a>.</p>
                <p>This makes developing REST services and managing the
                MySQL REST Service as easy as working with database
                schemas.</p>
                <p><strong><em>Example</em></strong></p>
                <p>The following example script configures the MySQL
                REST Service, creates a new REST service
                <code>/myService</code> and adds a REST schema
                <code>/sakila</code> and a REST DUALITY view
                <code>/actor</code> that lists all actors and their film
                titles.</p>
                <div class="sourceCode" id="cb1"><pre
                class="sourceCode sql"><code class="sourceCode sql"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>CONFIGURE REST METADATA;</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> REST SERVICE <span class="op">/</span>myService;</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="kw">USE</span> REST SERVICE <span class="op">/</span>myService;</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> REST <span class="kw">SCHEMA</span> <span class="op">/</span>sakila <span class="kw">FROM</span> `sakila`;</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="kw">USE</span> REST <span class="kw">SCHEMA</span> <span class="op">/</span>sakila;</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> REST DUALITY <span class="kw">VIEW</span> <span class="op">/</span>actor</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> `sakila`.`actor` <span class="kw">AS</span> MyServiceSakilaActor {</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>    actorId: actor_id @SORTABLE,</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>    firstName: first_name,</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    lastName: last_name,</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>    lastUpdate: last_update,</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>    filmActor: sakila.film_actor @REDUCETO(title) {</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>        film: sakila.film @UNNEST {</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>            title: title</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>};</span></code></pre></div>
                <blockquote>
                <p>Note: Please ensure to install the <a
                href="https://downloads.mysql.com/docs/sakila-db.zip">MySQL
                sakila example database schema</a> before running the
                MRS DDL script above.</p>
                </blockquote>
                <!-- Copyright (c) 2022, 2023, Oracle and/or its affiliates.

                This program is free software; you can redistribute it and/or modify
                it under the terms of the GNU General Public License, version 2.0,
                as published by the Free Software Foundation.

                This program is also distributed with certain software (including
                but not limited to OpenSSL) that is licensed under separate terms, as
                designated in a particular file or component or in included license
                documentation.  The authors of MySQL hereby grant you an additional
                permission to link the program and your derivative works with the
                separately licensed software that they have included with MySQL.
                This program is distributed in the hope that it will be useful,  but
                WITHOUT ANY WARRANTY; without even the implied warranty of
                MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See
                the GNU General Public License, version 2.0, for more details.

                You should have received a copy of the GNU General Public License
                along with this program; if not, write to the Free Software Foundation, Inc.,
                51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA -->
                <h1 data-number="2" id="mrs-ddl-reference"><span
                class="header-section-number">2</span> MRS DDL
                Reference</h1>
                <h2 data-number="2.1" id="configure-rest-metadata"><span
                class="header-section-number">2.1</span> CONFIGURE REST
                METADATA</h2>
                <p>The CONFIGURE REST METADATA statement is used to
                perform the initial configuration of the MySQL REST
                Service on a MySQL Server instance or InnoDB
                Cluster/Set.</p>
                <p>It will create the
                <code>mysql_rest_service_metadata</code> database
                schema.</p>
                <p>Please note that the MySQL account used to execute
                the statement needs the required privileges to create
                database schemas.</p>
                <p><strong><em>Syntax</em></strong></p>
                <p>configureRestMetadataStatement ::=</p>
                <figure>
                <img
                src="sections/../images/ddl/configureRestMetadataStatement.svg"
                title="configureRestMetadataStatement"
                alt="The CONFIGURE REST METADATA Statement" />
                <figcaption aria-hidden="true">The CONFIGURE REST
                METADATA Statement</figcaption>
                </figure>
                <p>restMetadataOptions ::= <img
                src="sections/../images/ddl/restMetadataOptions.svg"
                title="restMetadataOptions"
                alt="restMetadataOptions" /></p>
                <p>enabledDisabled ::= <img
                src="sections/../images/ddl/enabledDisabled.svg"
                title="enabledDisabled" alt="enabledDisabled" /></p>
                <p>jsonOptions ::= <img
                src="sections/../images/ddl/jsonOptions.svg"
                title="jsonOptions" alt="jsonOptions" /></p>
                <p>updateIfAvailable ::= <img
                src="sections/../images/ddl/updateIfAvailable.svg"
                title="updateIfAvailable" alt="updateIfAvailable" /></p>
                <p><strong><em>Example</em></strong></p>
                <div class="sourceCode" id="cb2"><pre
                class="sourceCode sql"><code class="sourceCode sql"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>CONFIGURE REST METADATA <span class="kw">UPDATE</span> <span class="cf">IF</span> AVAILABLE;</span></code></pre></div>
                <h3 data-number="2.1.1"
                id="enable-or-disable-the-mysql-rest-service"><span
                class="header-section-number">2.1.1</span> Enable or
                Disable the MySQL REST Service</h3>
                <p>The enabledDisabled option specifies if the MySQL
                REST Service should be enabled or disabled after the
                configuration operation. The default is set to enable
                the MySQL REST Service.</p>
                <h3 data-number="2.1.2"
                id="mysql-rest-service-options"><span
                class="header-section-number">2.1.2</span> MySQL REST
                Service Options</h3>
                <p>The jsonOptions allow to set a number of specific
                options for the service.</p>
                <p>These options can include the following JSON
                keys.</p>
                <ul>
                <li><code>defaultStaticContent</code> - Allows the
                definition of static content for the root path
                <code>/</code> that will be returned for file paths
                matching the given JSON keys. A JSON key
                <code>index.html</code> will be served as
                <code>/index.html</code> by the MySQL Router. The file
                content needs to be Base64 encoded. If the same JSON key
                is used for <code>defaultStaticContent</code> as well as
                for <code>defaultRedirects</code>, the redirect is
                prioritized.</li>
                <li><code>defaultRedirects</code> - Is used to define
                internal redirects performed by the MySQL Router. This
                can be used to expose content of a REST service on the
                root path <code>/</code>. A JSON key
                <code>index.html</code> holding the value
                <code>/myService/myContentSet/index.html</code> will
                exposed the corresponding file from the given path as
                <code>/index.html</code>.</li>
                <li><code>directoryIndexDirective</code> - Holds an
                ordered list of files that should be returned when a
                directory path has been requested. The first matching
                file that is available will be returned. The
                <code>directoryIndexDirective</code> is recursively
                applies to all directory paths exposed by the MySQL
                Router. To change the
                <code>directoryIndexDirective</code> for a given REST
                service or REST static content set, the corresponding
                option needs to be set for those objects.</li>
                </ul>
                <p>All other keys will be ignored and can be used to
                store custom metadata about the service. It is a good
                practice to include a unique prefix when adding custom
                keys to avoid them be overwritten by future MRS
                options.</p>
                <p><strong><em>Examples</em></strong></p>
                <p>The following JsonValue will define the static
                content for <code>/index.html</code>,
                <code>/favicon.ico</code> and <code>/favicon.svg</code>.
                It will also direct the MySQL Router to return the
                contents of <code>/index.html</code> if the root path
                <code>/</code> is requested,
                e.g.Â <code>https://my.domain.com/</code></p>
                <div class="sourceCode" id="cb3"><pre
                class="sourceCode json"><code class="sourceCode json"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;defaultStaticContent&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;index.html&quot;</span><span class="fu">:</span> <span class="st">&quot;PCFET0NUW...&quot;</span><span class="fu">,</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;favicon.ico&quot;</span><span class="fu">:</span> <span class="st">&quot;AAABAAMAM...&quot;</span><span class="fu">,</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;favicon.svg&quot;</span><span class="fu">:</span> <span class="st">&quot;PD94bWwmV...&quot;</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">},</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;directoryIndexDirective&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;index.html&quot;</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    <span class="ot">]</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
                <p>In this example an internal redirect of
                <code>/index.html</code> to
                <code>/myService/myContentSet/index.html</code> is
                performed, directly serving the <code>index.html</code>
                page of <code>/myService/myContentSet</code>. This
                overwrites the <code>index.html</code> definition in
                <code>defaultStaticContent</code>.</p>
                <p>This is useful to directly serve a specific app on
                the root path <code>/</code>.</p>
                <div class="sourceCode" id="cb4"><pre
                class="sourceCode json"><code class="sourceCode json"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;defaultStaticContent&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;index.html&quot;</span><span class="fu">:</span> <span class="st">&quot;PCFET0NUW...&quot;</span><span class="fu">,</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;favicon.ico&quot;</span><span class="fu">:</span> <span class="st">&quot;AAABAAMAM...&quot;</span><span class="fu">,</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;favicon.svg&quot;</span><span class="fu">:</span> <span class="st">&quot;PD94bWwmV...&quot;</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">},</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;defaultRedirects&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;index.html&quot;</span><span class="fu">:</span> <span class="st">&quot;/myService/myContentSet/index.html&quot;</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">},</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;directoryIndexDirective&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;index.html&quot;</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>    <span class="ot">]</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
                <h3 data-number="2.1.3"
                id="updating-the-mysql-rest-service-metadata-schema"><span
                class="header-section-number">2.1.3</span> Updating the
                MySQL REST Service Metadata Schema</h3>
                <p>If the updateIfAvailable is defined, the configure
                operation will include an update of the
                <code>mysql_rest_service_metadata</code> database
                schema.</p>
                <h2 data-number="2.2" id="create-rest-service"><span
                class="header-section-number">2.2</span> CREATE REST
                SERVICE</h2>
                <p>The CREATE REST SERVICE statement is used to create a
                new or replace an existing REST service.</p>
                <p>The MySQL REST Service supports the creation of many
                individual REST services. It is common to create a
                separate REST service for each REST application.</p>
                <p>Each service can have its own options, authentication
                apps and supports a different set of authentication
                users.</p>
                <p><strong><em>SYNTAX</em></strong></p>
                <p>createRestServiceStatement ::=</p>
                <figure>
                <img
                src="sections/../images/ddl/createRestServiceStatement.svg"
                title="CREATE REST SERVICE Statement"
                alt="CREATE REST SERVICE Statement" />
                <figcaption aria-hidden="true">CREATE REST SERVICE
                Statement</figcaption>
                </figure>
                <p>restServiceOptions ::= <img
                src="sections/../images/ddl/restServiceOptions.svg"
                title="restServiceOptions"
                alt="restServiceOptions" /></p>
                <p>enabledDisabled ::= <img
                src="sections/../images/ddl/enabledDisabled.svg"
                title="enabledDisabled" alt="enabledDisabled" /></p>
                <p>restAuthentication ::= <img
                src="sections/../images/ddl/restAuthentication.svg"
                title="restAuthentication"
                alt="restAuthentication" /></p>
                <p>jsonOptions ::= <img
                src="sections/../images/ddl/jsonOptions.svg"
                title="jsonOptions" alt="jsonOptions" /></p>
                <p>comments ::= <img
                src="sections/../images/ddl/comments.svg"
                title="comments" alt="comments" /></p>
                <p>!!TBC</p>
                <p><strong><em>Examples</em></strong></p>
                <p>The following example creates a REST service
                <code>/myTestService</code> that can only be accessed
                from localhost.</p>
                <div class="sourceCode" id="cb5"><pre
                class="sourceCode sql"><code class="sourceCode sql"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">OR</span> <span class="kw">REPLACE</span> REST SERVICE <span class="op">/</span>myService</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    COMMENTS <span class="ot">&quot;A simple REST service&quot;</span>;</span></code></pre></div>
                <p>The following example creates a REST service
                <code>/myTestService</code> that can only be accessed on
                localhost and is disabled after creation.</p>
                <div class="sourceCode" id="cb6"><pre
                class="sourceCode sql"><code class="sourceCode sql"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">OR</span> <span class="kw">REPLACE</span> REST SERVICE localhost<span class="op">/</span>myTestService</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    DISABLED</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    COMMENTS <span class="ot">&quot;A REST service that can only be accessed on localhost&quot;</span>;</span></code></pre></div>
                <div class="sourceCode" id="cb7"><pre
                class="sourceCode sql"><code class="sourceCode sql"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">OR</span> <span class="kw">REPLACE</span> REST SERVICE localhost<span class="op">/</span>myTestService</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    COMMENTS <span class="ot">&quot;A simple REST service&quot;</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    AUTHENTICATION</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>        PATH <span class="ot">&quot;/authentication&quot;</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>        REDIRECTION <span class="kw">DEFAULT</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>        <span class="kw">VALIDATION</span> <span class="kw">DEFAULT</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>        PAGE CONTENT <span class="kw">DEFAULT</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">USER</span> <span class="kw">MANAGEMENT</span> <span class="kw">SCHEMA</span> <span class="kw">DEFAULT</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>    OPTIONS {</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>        <span class="ot">&quot;headers&quot;</span>: {</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>            <span class="ot">&quot;Access-Control-Allow-Credentials&quot;</span>: <span class="ot">&quot;true&quot;</span>,</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>            <span class="ot">&quot;Access-Control-Allow-Headers&quot;</span>: <span class="ot">&quot;Content-Type, Authorization, X-Requested-With, Origin, X-Auth-Token&quot;</span>,</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>            <span class="ot">&quot;Access-Control-Allow-Methods&quot;</span>: <span class="ot">&quot;GET, POST, PUT, DELETE, OPTIONS&quot;</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>        },</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>        <span class="ot">&quot;http&quot;</span>: {</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>            <span class="ot">&quot;allowedOrigin&quot;</span>: <span class="ot">&quot;auto&quot;</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>        },</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>        <span class="ot">&quot;logging&quot;</span>: {</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>            <span class="ot">&quot;exceptions&quot;</span>: <span class="kw">true</span>,</span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>            <span class="ot">&quot;request&quot;</span>: {</span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>                <span class="ot">&quot;body&quot;</span>: <span class="kw">true</span>,</span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>                <span class="ot">&quot;headers&quot;</span>: <span class="kw">true</span></span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>            },</span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>            <span class="ot">&quot;response&quot;</span>: {</span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>                <span class="ot">&quot;body&quot;</span>: <span class="kw">true</span>,</span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>                <span class="ot">&quot;headers&quot;</span>: <span class="kw">true</span></span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>        },</span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a>        <span class="ot">&quot;returnInternalErrorDetails&quot;</span>: <span class="kw">true</span></span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a>    };</span></code></pre></div>
                <h3 data-number="2.2.1"
                id="enabling-or-disabling-a-rest-service-at-creation-time"><span
                class="header-section-number">2.2.1</span> Enabling or
                Disabling a REST Service at Creation Time</h3>
                <p>The enabledDisabled option specifies if the REST
                service should be enabled or disabled after the
                configuration operation.</p>
                <h3 data-number="2.2.2" id="rest-service-options"><span
                class="header-section-number">2.2.2</span> REST Service
                Options</h3>
                <p>The jsonOptions allow to set a number of specific
                options for the service.</p>
                <p>These options can include the following JSON
                keys.</p>
                <ul>
                <li><code>headers</code> - Allows the specification of
                HTTP headers. Please refer to the HTTP header
                documentation for details.</li>
                <li><code>http</code>
                <ul>
                <li><code>allowedOrigin</code> - The setting for
                Access-Control-Allow-Origin HTTP header. Can either be
                set to <code>*</code>, <code>null</code>,
                <code>&lt;origin&gt;</code> or <code>auto</code>. When
                set to <code>auto</code>, the MySQL Routers will return
                the origin of the specific client making the
                request.</li>
                </ul></li>
                <li><code>logging</code>
                <ul>
                <li><code>exceptions</code> - If exceptions should be
                logged.</li>
                <li><code>requests</code>
                <ul>
                <li><code>body</code> - If the content of request bodies
                should be logged.</li>
                <li><code>headers</code> - If the content of request
                headers should be logged.</li>
                </ul></li>
                <li><code>response</code>
                <ul>
                <li><code>body</code> - If the content of response
                bodies should be logged.</li>
                <li><code>headers</code> - If the content of response
                headers should be logged.</li>
                </ul></li>
                </ul></li>
                <li><code>returnInternalErrorDetails</code> - If
                internal errors should be returned. This is useful for
                application development but should be turned off for
                production deployments.</li>
                <li><code>defaultStaticContent</code> - Allows the
                definition of static content for
                <code>request path</code> of the REST service that will
                be returned for file paths matching the given JSON keys.
                A JSON key <code>index.html</code> will be served as
                <code>/myService/index.html</code> by the MySQL Router
                if the <code>request path</code> of the REST service has
                been set to <code>/myService</code>. The file content
                needs to be Base64 encoded. If the same JSON key is used
                for <code>defaultStaticContent</code> as well as for
                <code>defaultRedirects</code>, the redirect is
                prioritized.</li>
                <li><code>defaultRedirects</code> - Is used to define
                internal redirects performed by the MySQL Router. This
                can be used to expose content on the
                <code>request path</code> of the of a REST service. A
                JSON key <code>index.html</code> holding the value
                <code>/myService/myContentSet/index.html</code> will
                exposed the corresponding file from the given path as
                <code>/myService/index.html</code> if the
                <code>request path</code> of the REST service has been
                set to <code>/myService</code>.</li>
                <li><code>directoryIndexDirective</code> - Holds an
                ordered list of files that should be returned when a
                directory path has been requested. The first matching
                file that is available will be returned. The
                <code>directoryIndexDirective</code> is recursively
                applies to all directory paths exposed by the MySQL
                Router. To change the
                <code>directoryIndexDirective</code> for a given REST
                object, the corresponding option needs to be set for
                that object.</li>
                </ul>
                <p>All other keys will be ignored and can be used to
                store custom metadata about the service. It is a good
                practice to include a unique prefix when adding custom
                keys to avoid them be overwritten by future MRS
                options.</p>
                <p><strong><em>Examples</em></strong></p>
                <div class="sourceCode" id="cb8"><pre
                class="sourceCode json"><code class="sourceCode json"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;headers&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;Access-Control-Allow-Credentials&quot;</span><span class="fu">:</span> <span class="st">&quot;true&quot;</span><span class="fu">,</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;Access-Control-Allow-Headers&quot;</span><span class="fu">:</span> <span class="st">&quot;Content-Type, Authorization, X-Requested-With, Origin, X-Auth-Token&quot;</span><span class="fu">,</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;Access-Control-Allow-Methods&quot;</span><span class="fu">:</span> <span class="st">&quot;GET, POST, PUT, DELETE, OPTIONS&quot;</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">},</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;http&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;allowedOrigin&quot;</span><span class="fu">:</span> <span class="st">&quot;auto&quot;</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">},</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;logging&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;exceptions&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;request&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;body&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;headers&quot;</span><span class="fu">:</span> <span class="kw">true</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>        <span class="fu">},</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;response&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;body&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;headers&quot;</span><span class="fu">:</span> <span class="kw">true</span></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>        <span class="fu">}</span></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">},</span></span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;returnInternalErrorDetails&quot;</span><span class="fu">:</span> <span class="kw">true</span></span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
                <p>Copyright (c) 2023, Oracle and/or its affiliates.</p>
            </div>
        </div>
    </div>
</body>

</html>